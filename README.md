# Ответы на экзаменационные билеты по курсу "Встроенные системы"

## Оглавление
* [Билет 1](#билет-1)
    1. Определение встроенной системы. Компоненты встроенной системы.
    2. Порты вывода с открытым коллектором (стоком). Схемотехника. Достоинства и недостатки.
* [Билет 2](#билет-2)
    1. Характеристики встроенной системы.
    2. Двунаправленные порты. Порты с альтернативной функцией.
* [Билет 3](#билет-3)
    1. Определения: Надежность, Отказоустойчивость, В режиме реального времени, Гибкость, Переносимость.
    2. Таймеры-счетчики. Режим таймера.
* [Билет 4](#билет-4)
    1. Типы встраиваемых систем (Малый, Средний, Сложные).
    2. Таймеры-счетчики. Режим счетчика. Таймеры MCS-51. Регистр TMOD.
* [Билет 5](#билет-5)
    1. Отличия микроконтроллера от микропроцессора. Области применения.
    2. Схема управления Таймерами (0 или 1). Регистр TCON.
* [Билет 6](#билет-6)
    1. Преимущества и недостатки встроенной системы.
    2. Режимы работы таймеров MCS-51: Режим 0, Режим 1, Режим 2, Режим 3.
* [Билет 7](#билет-7)
    1. Процессоры во встроенной системе. Типы процессоров.
    2. Настройка таймера на заданную частоту. Использование таймера в качестве измерителя ширины импульсов и частотомера.
* [Билет 8](#билет-8)
    1. Микропроцессор против микроконтроллера (Блок схема).
    2. Модули таймеров-счетчиков со схемами входного захвата, выходного сравнения и выработки сигналов с ШИМ.
* [Билет 9](#билет-9)
    1. Архитектура фон Неймана.
    2. Схема выработки сигнала с ШИМ. Процессоры событий.
* [Билет 10](#билет-10)
    1. Гарвардская Архитектура.
    2. Аналого-цифровой преобразователь (АЦП). Характеристики.
* [Билет 11](#билет-11)
    1. Архитектура фон-Неймана против архитектуры Гарварда. CISC и RISC.
    2. Источник опорного напряжения Vref и коммутатор Vref. Режимы работы АЦП. Аналоговый компаратор.
* [Билет 12](#билет-12)
    1. Инструменты (Компилятор, Кросс-компилятор, Декомпилятор, Конвертер языков).
    2. Классификация АЦП. Параллельные АЦП. АЦП последовательного приближения.
* [Билет 13](#билет-13)
    1. Инструменты (Ассемблеры, Средства отладки).
    2. Цифро-аналоговый преобразователь (ЦАП). Матрица R-2R.
* [Билет 14](#билет-14)
    1. Инструменты (Симуляторы, Эмуляторы, Стартовые наборы микроконтроллеров).
    2. Контроллеры последовательных интерфейсов. Модуль UART.
* [Билет 15](#билет-15)
    1. Периферийные устройства во встроенных системах. Критерии выбора микроконтроллера.
    2. Контроллер последовательного интерфейса в MCS-51. Режимы работы (0, 1, 2, 3).
* [Билет 16](#билет-16)
    1. Программируемые логические интегральные схемы (ПЛИС). Программируемая логическая матрица (PLA).
    2. Регистр управления последовательным портом SCON в MCS-51. Генерация скорости обмена.
* [Билет 17](#билет-17)
    1. CPLD. FPGA. Логический элемент FPGA.
    2. Подсистема синхронизации.
* [Билет 18](#билет-18)
    1. Системы-на-кристалле (SoC).
    2. Механизмы начальной инициализации (Boot). Параметры конфигурации.
* [Билет 19](#билет-19)
    1. Типовая структура процессора для встроенных систем. Базовый блок.
    2. Внешнее программирование памяти программ (Параллельное, Последовательное, JTAG).
* [Билет 20](#билет-20)
    1. Организация прерываний в управляющих процессорах. Источники. Обработка.
    2. Сетевые интерфейсы. Интерфейс I2C.
* [Билет 21](#билет-21)
    1. Модули памяти и виды ROM.
    2. Определения и принцип работы I2C. Передача бита и данных.
* [Билет 22](#билет-22)
    1. ОЗУ (RAM) и их виды.
    2. I2C: START/STOP, ACK, синхронизация.
* [Билет 23](#билет-23)
    1. Память EEPROM (E2PROM) и характеристики AT24Cxx.
    2. Формат данных I2C (7-бит адрес). Арбитраж. Преимущества.
* [Билет 24](#билет-24)
    1. Характеристики и организация микросхемы AT24Cxx.
    2. RS-485: особенности, электрические/временные характеристики, скорость/дальность.
* [Билет 25](#билет-25)
    1. Блок-схема EEPROM и адресация модулей.
    2. RS-485: согласование (termination) и конфигурация. Защитное смещение (bias).
* [Билет 26](#билет-26)
    1. Операции записи в EEPROM.
    2. Надёжность RS-485: предотвращение приёма в полудуплексе. Схема подключения трансивера.
* [Билет 27](#билет-27)
    1. Операции чтения из памяти EEPROM.
    2. CAN: области применения, Data Link Layer (LLC/MAC), Physical Layer, характеристики.
* [Билет 28](#билет-28)
    1. Порты ввода-вывода (I/O Ports).
    2. Промышленный Ethernet: реальное время, резервирование, кольцевая топология, отличие от обычного Ethernet.
* [Билет 29](#билет-29)
    1. Однонаправленные порты и схема выхода Push-Pull.
    2. LIN. PLC технология. Преимущества/недостатки PLC (сравнение с Wi-Fi).
* [Билет 30](#билет-30)
    1. Выходные порты Open-Drain и выходные порты с внутренней нагрузкой.
    2. M2M. ARINC 429. MIL-STD-1553. Physical layer, Bus Controller, Remote devices, Monitor.

---

## Билет 1
### 1. Определение системы и встраиваемой системы. Основные компоненты.
**Система** — это система, в которой все ее узлы работают вместе в соответствии с набором правил.

**Встраиваемая система** — это специализированная система управления, разработанная для работы будучи встроенной непосредственно в устройство, которым она управляет. В отличие от универсальных компьютеров, она выполняет узкий круг задач. Это основанная на микроконтроллере, программно управляемую, надежная система управления в реальном времени.

**Основные компоненты:**
1.  **Аппаратное обеспечение (Hardware):** Микроконтроллер/микропроцессор, память, периферия.
2.  **Прикладное программное обеспечение (Application Software):** Реализует алгоритм управления.
3.  **Операционная система реального времени (RTOS):** (Опционально) Контролирует прикладное ПО и предоставляет механизм запуска процессов по расписанию. Встраиваемая система небольшого масштаба может не иметь ОСРВ.

### 2. Открытые выходные порты (Open Collector / Open Drain)
**Схемотехника:** Выходной каскад построен по однотактной схеме с внешней нагрузкой. Выходной транзистор подключен так, что может только замыкать выход на землю (логический "0"). Для получения логической "1" требуется внешний подтягивающий резистор (pull-up) к источнику питания.

**Достоинства:**
*   **Согласование уровней:** Внешнее напряжение питания нагрузки может отличаться от питания МК (например, управление 12В нагрузкой от 5В контроллера).
*   **Монтажное И:** Возможность подключения нескольких выходов к одной линии (Wired-AND).
*   **Простота:** Управление одним регистром.

**Недостатки:**
*   Требуется внешний резистор.
*   Низкая нагрузочная способность в состоянии "1" (определяется резистором).
*   Затянутый фронт нарастания сигнала (зависит от RC-цепочки).

---

## Билет 2
### 1. Характеристики встраиваемых систем
1.  **Однофункциональность:** Выполняет одну специализированную задачу и делает это неоднократно (например, пейджер).
2.  **Жесткие ограничения:** По стоимости, размеру, энергопотреблению и производительности. Должна помещаться на одном чипе и работать быстро.
3.  **Работа в реальном времени:** Должна реагировать на изменения в среде и вычислять результаты без задержек (Reactive).
4.  **Надежность:** Должна работать автономно долгое время.
5.  **Базируется на микропроцессорах/микроконтроллерах.**
6.  **Наличие памяти:** ПО обычно встроено в ПЗУ.
7.  **Подключение:** Наличие периферии для ввода-вывода.
8.  **Системы HW-SW:** Сочетание гибкости ПО и производительности аппаратного обеспечения.

### 2. Двунаправленные порты и порты с альтернативной функцией. Комплементарный (push-pull) выходной каскад
**Двунаправленные порты:**
*   **Квазидвунаправленные:** Со слабой подтяжкой (как в MCS-51). Перед чтением нужно записать "1".
*   **Переключаемые:** С регистром направления (DDR). Объединяют схемы ввода и вывода.

**Порты с альтернативной функцией:** Выводы могут использоваться либо как GPIO, либо как выводы периферийных модулей (UART, I2C, ADC). При активации альтернативной функции основные схемы порта отключаются или переконфигурируются.

**Комплементарный (push-pull) каскад (Двухтактная схема):**
Использует два транзистора (верхний и нижний).
*   **Лог. "1":** Открыт верхний транзистор, выход подключен к питанию.
*   **Лог. "0":** Открыт нижний транзистор, выход подключен к земле.
*   **Z-состояние:** Оба транзистора закрыты (высокоомное состояние).
**Достоинства:** Высокий ток в обоих состояниях, крутые фронты, управление мощной нагрузкой без доп. схем.

---

## Билет 3
### 1. Основные понятия, используемые во встраиваемых системах
*   **Надежность:** Вероятность выживания системы (безотказной работы), когда функция критична.
*   **Отказоустойчивость:** Способность системы выживать (продолжать работу) при наличии неисправностей.
*   **Реальное время:** Способность соответствовать временным ограничениям, навязанным внешним миром (гарантированная реакция).
*   **Гибкость:** Возможность отладки и удаленного обслуживания (модификации).
*   **Переносимость:** Простота использования ПО в различных средах (абстракция от железа).

### 2. Таймеры-счётчики. Режим таймера
**Таймеры-счётчики** — модули для подсчета временных интервалов или внешних событий.

**Режим таймера:**
*   Тактирование выполняется от сигнала внутренней синхронизации процессора ($F_{int}$).
*   Используется **предделитель** для снижения частоты и увеличения интервалов.
*   **Регистр-счетчик** накапливает значение.
*   При переполнении устанавливается флаг **TF** (может вызывать прерывание).
*   Режимы счета: Однократный, Циклический, С автоперезагрузкой.

---

## Билет 4
### 1. Виды встраиваемых систем
1.  **Малый масштаб:** 8/16-битные микроконтроллеры. Питание от батарей. Инструменты: редактор, ассемблер. Часто без ОС.
2.  **Средний масштаб:** 16/32-битные микроконтроллеры. Аппаратные и программные сложности. Языки C/C++, Java, RTOS.
3.  **Сложные:** Много аппаратных и программных сложностей. Использование IPS, ASIPS, PLA, масштабируемых процессоров. Требуется совместное проектирование HW/SW (Co-design).

### 2. Режим счётчика. Таймеры Intel MCS-51. Формат TMOD
**Режим счётчика:** Тактирование от внешнего импульсного сигнала на входе ($T0/T1$). Инкремент происходит по перепаду (фронту) сигнала ("внешнее событие"). Максимальная частота обычно ограничена (например, 1/24 частоты кварца).

**Таймеры MCS-51:** Два 16-битных таймера T0 и T1. Состоят из пар регистров THx и TLx.

**Регистр TMOD (Timer Mode):**
*   **GATE:** Управление запуском от внешнего входа INTx (для измерения длительности импульса).
*   **C/T:** Выбор режима (0 = Таймер от внутр. частоты, 1 = Счетчик внешних событий).
*   **M1, M0:** Режим работы:
    *   00: Режим 0 (13-бит).
    *   01: Режим 1 (16-бит).
    *   10: Режим 2 (8-бит с автоперезагрузкой).
    *   11: Режим 3 (Два 8-битных таймера).

---

## Билет 5
### 1. Основные различия между микроконтроллером и микропроцессором и области применения
**Микропроцессор (MPU):**
*   Только CPU (регистры, ALU, управление).
*   Память и периферия внешние.
*   Многозадачность, высокая производительность (> ГГц).
*   Применение: ПК, серверы, сложные вычислительные системы.

**Микроконтроллер (MCU):**
*   CPU + RAM + ROM + Периферия (Таймеры, I/O, ADC) на одном кристалле.
*   Ориентирован на одну задачу (Single task).
*   Низкое потребление, компактность, низкая стоимость.
*   Применение: Встраиваемые системы, бытовая техника, автоматика.

### 2. Схема управления таймерами 0/1. Формат TCON
**Схема:** Включает мультиплексор источника тактирования (C/T), логику управления запуском (биты TRx и GATE + вход INTx) и флаги переполнения. Таймер может быть остановлен для экономии энергии.

**Регистр TCON (Timer Control):**
*   **TF1/TF0:** Флаги переполнения таймеров (устанавливаются аппаратно, сбрасываются при обработке прерывания).
*   **TR1/TR0:** Биты запуска таймеров (Run Control). 1 = Пуск, 0 = Стоп.
*   **IE1/IE0:** Флаги внешних прерываний (по срезу сигнала).
*   **IT1/IT0:** Управление типом внешнего прерывания (0 = по уровню, 1 = по спаду).

---

## Билет 6
### 1. Преимущества и недостатки встраиваемых систем
**Преимущества:**
*   **Оптимизация:** Способна покрывать разные среды, меньше ошибок.
*   **Стоимость:** Упрощает аппаратное обеспечение, снижает расходы, выгодна для массового производства.
*   **Характеристики:** Надежность, малый размер, быстрые операции, малое энергопотребление.
*   **Качество:** Улучшенное качество продукции и оптимизация ресурсов.

**Недостатки:**
*   **Сложность разработки:** Требуются большие усилия и время (Time-to-market).
*   **Специализация:** Выполняет узкую задачу, нельзя перепрограммировать на другое.
*   **Ресурсы:** Ограниченная память и ресурсы.
*   **Обслуживание:** Трудно сделать резервную копию, сложность модернизации.

### 2. Режимы таймера 0–3 (MCS-51)
*   **Режим 0:** THx (8 бит) + TLx (младшие 5 бит) → 13-битный счёт. Устаревший и простой режим. 
*   **Режим 1:** полный 16-битный счёт (THx:TLx) → широкий диапазон, используется наиболее часто. 
*   **Режим 2:** TLx считает 8 бит, при переполнении TLx автоматически перезагружается значением THx. Очень удобен для организации периодических прерываний. 
*   **Режим 3:** Timer 0 делится на два независимых 8-битных таймера (TL0 и TH0 работают отдельно), Timer 1 обычно останавливается или работает с ограничениями (в зависимости от конкретной версии 8051). Используется редко.

---

## Билет 7
### 1. Процессоры во встраиваемых системах. Виды процессоров
**Процессор** — сердце системы (CU + EU).
**Виды:**
*   **Процессор общего назначения (GPP).**
*   **Микропроцессор (MPU):** Для производительных систем.
*   **Микроконтроллер (MCU):** Самые массовые.
*   **Встроенный процессор.**
*   **DSP (Digital Signal Processor):** Для обработки сигналов.
*   **Медиапроцессор.**
*   **ASIC/ASSP:** Заказные/специализированные (Application Specific).
*   **ПЛИС (FPGA):** Программируемая логика.

### 2. Настройка таймера на частоту; измерение ширины импульса; принцип измерения частоты
*   **Настройка на частоту:** Используется режим автоперезагрузки (Режим 2) или программная перезагрузка (Режим 1).
    *   Формула: $Counts = F_{osc} / (12 \times F_{target})$.
    *   Значение в регистр: $Reload = Max - Counts$.
*   **Измерение ширины импульса:**
    *   Сигнал подается на вход **INTx**.
    *   Бит **GATE = 1**. Таймер считает только тогда, когда на входе INTx высокий уровень ("1") и бит TRx=1.
    *   Результат в регистрах таймера = длительность импульса.
*   **Измерение частоты:**
    *   Таймер настраивается в **режим счетчика** (C/T = 1).
    *   Считает импульсы на входе Tx за строго определенный интервал времени (задаваемый другим таймером).
    *   Результат = количество импульсов за время (частота).

---

## Билет 8
### 1. Микропроцессор и микроконтроллер. Блок-схема
**Микропроцессор (МП):** Чип CPU. Требует внешние чипы: ОЗУ, ПЗУ, Таймеры, Порты ввода-вывода. Блок-схема: CPU <-> Шина <-> Память/Периферия.
**Микроконтроллер (МК):** Однокристальный модуль (SoC). Все блоки (Ядро, ОЗУ, ПЗУ, Таймеры, АЦП, Порты) интегрированы внутри одного корпуса. Блок-схема: Все блоки внутри квадрата МК.

### 2. Таймерные модули с Input Capture, Output Compare и PWM
**CCP (Capture/Compare/PWM)** — усовершенствованные таймерные модули.
*   **Output Compare (Выходное сравнение):** Цифровой компаратор сравнивает счетчик таймера с регистром сравнения. При совпадении: устанавливается флаг OCF, изменяется состояние вывода OCO (0, 1 или инверсия), возможен сброс таймера. Применение: генерация частот, одиночных импульсов.
*   **Input Capture (Входной захват):** Фиксация времени внешнего события. При перепаде на входе ICI текущее значение таймера копируется в регистр захвата. Применение: измерение периода, частоты, фазы.
*   **PWM (ШИМ):** См. Билет 9.

---

## Билет 9
### 1. Архитектура фон Неймана и её особенности
Единая память и единая шина для команд и данных.
**Особенности:**
*   Процессор выполняет одну операцию за раз (либо выборка команды, либо данных).
*   "Узкое место" фон Неймана (Bottleneck) — ограничение скорости шиной.
*   Простое аппаратное обеспечение.
*   Эффективное использование памяти (нет разделения на зоны).

### 2. Генерация PWM, PWM-модуль, процессор событий
**PWM (ШИМ):** Модификация Output Compare.
*   **Период** задается переполнением таймера (или регистром периода).
*   **Скважность (длительность импульса)** задается регистром сравнения.
*   При совпадении счетчика с регистром сравнения выход переключается (например, в 0), при переполнении — возвращается (в 1).
**Процессор событий (PCA/CAPCOM):** Единый аппаратный блок (счетчик), обслуживающий несколько независимых каналов захвата/сравнения/ШИМ. Позволяет синхронизировать множество сигналов.

---

## Билет 10
### 1. Архитектура Гарварда и её особенности
Раздельная память и раздельные шины для команд (программ) и данных.
**Особенности:**
*   Одновременный доступ к инструкции и данным (параллелизм).
*   Высокая скорость выполнения (быстрее фон Неймана).
*   Сложная аппаратная реализация (больше шин).
*   Стандарт для современных микроконтроллеров.
*   Неэффективное использование памяти (свободное место в памяти команд нельзя использовать для данных).

### 2. АЦП (ADC). Основные характеристики
Преобразует аналоговый сигнал (напряжение) в цифровой код.
**Основные характеристики:**
1.  **Разрешение (Resolution):** Минимальное изменение сигнала, которое можно оцифровать ($V_{ref}/2^n$).
2.  **Разрядность (Bit depth):** Количество бит выходного кода (8, 10, 12 бит).
3.  **Частота дискретизации:** Как часто делаются выборки (теорема Котельникова: $F_d > 2F_{max}$).
4.  **Точность:** Ошибки квантования, нелинейность.
5.  **Время преобразования:** Время от запуска до получения результата.
**УВХ (Устройство выборки-хранения):** Фиксирует напряжение на входе на время преобразования (конденсатор + ключ).

---

## Билет 11
### 1. Сравнение архитектур Гарварда и фон Неймана. CISC и RISC
**Гарвард vs Фон Нейман:**
*   **Фон Нейман:** Единая память и шина для команд и данных. Последовательная выборка (сначала команда, потом данные). "Узкое место" — шина. Проще аппаратно.
*   **Гарвард:** Раздельные шины и память для команд и данных. Одновременная выборка (параллелизм). Быстрее, но сложнее (больше дорожек). Стандарт для МК.

**CISC vs RISC:**
*   **CISC (Complex Instruction Set):** Много сложных команд разной длины. Микрокод. Упор на сложность железа, чтобы упростить программирование на ассемблере. (Пример: x86).
*   **RISC (Reduced Instruction Set):** Мало простых команд фиксированной длины. Выполнение за 1 такт. Упор на оптимизирующий компилятор. (Пример: ARM, AVR).

### 2. Источник Vref и коммутатор Vref. Режимы ADC. Аналоговый компаратор
**Vref (Опорное напряжение):** Главный параметр АЦП. Определяет диапазон измерения ($0 \dots V_{ref}$) и цену деления ($Step = V_{ref} / 2^n$).
*   **Источники:** Внешний вывод (Vref), Питание (Vcc), Внутренний источник (Bandgap, например 2.56В).
*   **Коммутатор:** Позволяет выбирать источник программно.

**Режимы АЦП:**
*   **Одиночное преобразование:** Запуск -> Результат -> Стоп.
*   **Непрерывное (Free Running):** Запуск -> Результат -> Новый запуск...
*   **Сканирование:** Последовательный опрос нескольких каналов.
*   **По событию (Triggered):** Запуск от таймера или внешнего сигнала.

**Аналоговый компаратор:** Сравнивает два напряжения ($V_+$ и $V_-$). На выходе логическая "1" (если $V_+ > V_-$) или "0". Используется для детектирования порогов, перехода через ноль, в ШИМ.

---

## Билет 12
### 1. Инструменты и периферийные устройства
**Инструменты разработки:**
*   **Трансляторы:** Компилятор (C -> ASM -> HEX), Ассемблер.
*   **Компоновщик (Linker):** Собирает объектные файлы в один исполняемый.
*   **Отладчик (Debugger):** Позволяет выполнять программу пошагово, смотреть регистры.
*   **Симулятор:** Программная модель МК на ПК.
*   **Эмулятор:** Аппаратное средство отладки в реальной схеме.

**Периферийные устройства:**
*   **Системные:** Таймеры, Watchdog, Контроллер прерываний, DMA.
*   **Интерфейсные:** UART, SPI, I2C, CAN, USB, Ethernet.
*   **Аналоговые:** АЦП (ADC), ЦАП (DAC), Компараторы.
*   **I/O:** Порты ввода-вывода (GPIO).

### 2. Классификация ADC: параллельный и последовательного приближения (SAR)
*   **Параллельный (Flash):** Содержит делитель напряжения и $2^n-1$ компараторов. Мгновенное преобразование. Очень быстрый, но дорогой, большой и потребляет много энергии.
*   **Последовательного приближения (SAR - Successive Approximation):** Использует один компаратор, ЦАП и регистр сдвига. Подбирает биты от старшего к младшему (как взвешивание на весах). Оптимальный баланс скорости, точности и цены. Самый распространенный в МК.

---

## Билет 13
### 2. DAC (ЦАП). R-2R матрица
**ЦАП (Цифро-Аналоговый Преобразователь):** Преобразует цифровой код в уровень напряжения.
**Схема R-2R:**
*   Использует резисторы только двух номиналов: $R$ и $2R$.
*   Представляет собой резистивную матрицу (лестницу).
*   Каждый бит входного кода управляет ключом, подключающим резистор $2R$ либо к земле (0), либо к опорному напряжению (1).
*   Токи суммируются, создавая на выходе напряжение, пропорциональное коду.
*   **Преимущество:** Легко изготовить в интегральном исполнении (важно только отношение сопротивлений, а не абсолютная точность).

---

## Билет 14
### 1. Симуляторы, эмуляторы и стартовые наборы
*   **Симулятор:** Чисто программное обеспечение. Моделирует работу процессора и периферии. Плюсы: дешево, не нужно железо. Минусы: не работает с реальными внешними сигналами, может отличаться от реальности.
*   **Внутрисхемный эмулятор (ICE):** Специальное устройство, подключаемое вместо МК. Дает полный контроль над "железом", трассировку, точки останова. Дорого.
*   **Внутрисхемный отладчик (JTAG/SWD):** Использует встроенный в МК модуль отладки. Дешевле эмулятора, но функционален.
*   **Стартовый набор (Starter Kit / Evaluation Board):** Плата с распаянным МК, питанием, кнопками, светодиодами и программатором. Предназначена для быстрого начала работы и обучения.

### 2. Контроллеры последовательных интерфейсов. UART: состав и схема модуля
**UART (Universal Asynchronous Receiver-Transmitter).**
**Состав модуля:**
1.  **Генератор скорости (Baud Rate Generator):** Обычно используется системный таймер или делитель частоты.
2.  **Сдвиговые регистры:**
    *   Передающий (Transmit Shift Register) — преобразует параллельный байт в последовательность бит.
    *   Принимающий (Receive Shift Register) — собирает биты в байт.
3.  **Буферные регистры (SBUF):** Для хранения данных (чтобы процессор успел считать/записать).
4.  **Блок управления:** Контроль четности, старт/стоп битов, флагов прерываний.

---

## Билет 15
### 1. Периферийные устройства и критерии выбора микроконтроллера
**Критерии выбора:**
1.  **Разрядность:** 8 бит (простые задачи), 32 бита (вычисления, RTOS).
2.  **Память:** Объем Flash (код) и RAM (данные).
3.  **Периферия:** Наличие нужных интерфейсов (CAN для авто, Ethernet для сети, USB). Количество таймеров, каналов АЦП.
4.  **Корпус и выводы:** Количество GPIO, габариты.
5.  **Питание:** Напряжение (3.3В, 5В), энергопотребление (Battery powered).
6.  **Цена и доступность:** Важно для серии.
7.  **Экосистема:** Наличие удобных средств разработки, примеров, сообщества.

### 2. Режимы UART MCS-51 (0–3)
*   **Режим 0 (Shift Register):** Синхронный режим. Работает как сдвиговый регистр (для расширения портов ввода-вывода). Данные и клок (TXD выдает клок). Скорость фиксирована: $F_{osc}/12$.
*   **Режим 1 (8-bit UART):** Стандартный асинхронный режим. 10 бит в кадре (Старт + 8 бит данных + Стоп). Скорость переменная (задается Таймером 1).
*   **Режим 2 (9-bit UART):** 11 бит в кадре (Старт + 8 данных + 9-й бит + Стоп). 9-й бит можно использовать для четности или адресации. Скорость фиксирована: $F_{osc}/32$ или $F_{osc}/64$.
*   **Режим 3 (9-bit UART):** То же, что Режим 2, но скорость переменная (как в Режиме 1).

---

## Билет 16
### 1. Программируемые логические интегральные микросхемы (ПЛИС/FPGA)
**ПЛИС (PLD — Programmable Logic Device):** Микросхемы, логика работы которых не определена при изготовлении, а задается программированием.
*   **FPGA (Field-Programmable Gate Array):** Программируемая пользователем вентильная матрица.
    *   Состоит из матрицы конфигурируемых логических блоков (CLB), окруженных программируемыми соединениями (интерконнектом).
    *   Позволяет реализовать любую цифровую схему (от простой логики до целого процессора).
    *   **Преимущества:** Истинная параллельность выполнения операций, высокая скорость, возможность переконфигурации "в поле".

### 2. Регистр SCON и способы установки baud
**SCON (Serial Control):** Регистр управления последовательным портом MCS-51.
*   **SM0, SM1:** Выбор режима работы (0–3).
*   **SM2:** Разрешение мультипроцессорной работы (для режимов 2 и 3).
*   **REN (Receiver Enable):** Разрешение приема.
*   **TB8:** 9-й бит для передачи (в режимах 2 и 3).
*   **RB8:** Принятый 9-й бит.
*   **TI / RI:** Флаги прерывания по окончании передачи / приема.

**Установка Baud Rate (Скорости):**
*   **Режим 0:** Фиксированная ($F_{osc}/12$).
*   **Режим 2:** Фиксированная ($F_{osc}/32$ или $F_{osc}/64$, зависит от бита SMOD).
*   **Режимы 1 и 3:** Переменная. Задается частотой переполнения Таймера 1.
    *   Формула: $Baud = \frac{2^{SMOD}}{32} \times \frac{F_{osc}}{12 \times (256 - TH1)}$.

---

## Билет 17
### 1. CPLD, FPGA и логический элемент FPGA
*   **CPLD (Complex PLD):** Архитектура на основе макроячеек. Энергонезависимая (Flash). Меньше логики, но предсказуемые задержки (pin-to-pin). Готова к работе сразу после включения.
*   **FPGA:** Архитектура на основе таблиц истинности (LUT). Энергозависимая (SRAM) — требует загрузки конфигурации при включении. Огромная логическая емкость.
*   **Логический элемент (LE/CLB):** Базовый кирпичик FPGA. Обычно содержит:
    *   **LUT (Look-Up Table):** Таблица поиска для реализации любой логической функции от N входов.
    *   **Триггер (Flip-Flop):** Для хранения состояния (элемент памяти).
    *   **Мультиплексоры:** Для маршрутизации сигналов.

### 2. Подсистема синхронизации. Обобщённая структура. Времязависимые цепи
**Структура:**
1.  **Источник:** Кварцевый резонатор, RC-цепочка или внешний сигнал.
2.  **Генератор (Oscillator):** Усилитель для поддержания колебаний.
3.  **PLL (ФАПЧ):** Умножитель частоты (позволяет получить высокую частоту ядра из низкой опорной).
4.  **Предделители (Prescalers):** Делят частоту для периферии (ADC, Timers).

**Времязависимые цепи:**
*   **Кварцевый резонатор:** Высокая точность и стабильность.
*   **Керамический резонатор:** Дешевле, быстрее запускается, но менее точен.
*   **RC-генератор:** Встроенный в МК. Низкая точность, сильная зависимость от температуры. Используется для Watchdog или быстрого старта.

---

## Билет 18
### 1. Системы на кристалле (SoC — System on Chip)
Концепция интеграции всех компонентов вычислительной системы на одной микросхеме.
*   **Включает:** Одно или несколько ядер (CPU, DSP), Память (RAM, ROM), Периферию (I/O), Аналоговые блоки (ADC/DAC), Радиомодули (Wi-Fi, BT).
*   **Примеры:** Процессоры в смартфонах (Qualcomm Snapdragon, Apple A-series), современные сложные микроконтроллеры (STM32).
*   **Плюсы:** Миниатюризация, снижение потребления, высокая скорость обмена данными внутри чипа.

### 2. Механизмы первичной инициализации бортовой памяти
При включении питания (Power-On Reset):
1.  **Bootloader (Загрузчик):** Специальная программа в защищенной области памяти. Проверяет условия (нажата ли кнопка, есть ли сигнал по UART/USB). Если да — переходит в режим обновления прошивки. Если нет — запускает основную программу.
2.  **Startup Code (C-Runtime startup):** Код, выполняемый до функции `main()`.
    *   Инициализирует указатель стека (SP).
    *   Копирует инициализированные переменные из Flash в RAM (секция `.data`).
    *   Обнуляет неинициализированные переменные в RAM (секция `.bss`).
    *   Настраивает систему тактирования.

---

## Билет 19
### 1. Типовая структура процессора для встраиваемых систем
*   **Ядро (Core):** ALU (арифметика), Регистры общего назначения (GPR), Устройство управления (дешифратор команд).
*   **Шины:** Адреса, Данных, Управления. Часто используется Гарвардская архитектура (раздельные шины).
*   **Контроллер прерываний (NVIC):** Управление приоритетами и векторами.
*   **Интерфейс памяти:** Для доступа к Flash и SRAM.
*   **Периферийная шина:** Для подключения таймеров, UART, GPIO.

### 2. Внешнее программирование встроенной ROM: параллельное vs последовательное (JTAG)
*   **Параллельное программирование:**
    *   Используется высокое напряжение (12В).
    *   Требует много выводов (адрес + данные).
    *   Быстрое, но требует извлечения чипа или сложной разводки. Обычно используется в промышленных программаторах перед монтажом.
*   **Последовательное (ISP - In-System Programming / JTAG / SWD):**
    *   Использует мало выводов (2-4 линии: TCK, TMS, TDI, TDO).
    *   Позволяет прошивать чип, уже запаянный на плату.
    *   Стандарт де-факто для разработки и обновления ПО.

---

## Билет 20
### 1. Организация прерываний в управляющих процессорах
**Прерывание** — механизм реакции на асинхронные события.
*   **Таблица векторов (Interrupt Vector Table):** Список адресов обработчиков для каждого события. Находится в начале памяти.
*   **Контекст:** При входе в прерывание процессор автоматически (или программист вручную) сохраняет текущее состояние (PC, регистры, флаги) в стек, чтобы потом вернуться.
*   **Вложенность (Nesting):** Прерывание с более высоким приоритетом может прервать обработку низкоприоритетного.

### 2. Сетевые интерфейсы. I2C: режимы, применение, концепция
**I2C (Inter-Integrated Circuit):**
*   **Концепция:** Двухпроводная шина (SDA, SCL). Адресуемая передача данных. Master управляет тактированием, Slave отвечает.
*   **Режимы скорости:**
    *   Standard-mode (Sm): до 100 кбит/с.
    *   Fast-mode (Fm): до 400 кбит/с.
    *   Fast-mode Plus (Fm+): до 1 Мбит/с.
    *   High-speed mode (Hs): до 3.4 Мбит/с.
*   **Применение:** Подключение низкоскоростной периферии на одной плате: датчики, EEPROM, часы реального времени (RTC), управление питанием.

---

## Билет 21
### 1. Модули памяти и виды ROM
**ROM (Read-Only Memory):**
*   **Mask ROM:** Программируется фотошаблоном при производстве. Дешево при миллионных тиражах. Нельзя изменить.
*   **OTP (One-Time Programmable):** Можно прошить один раз (пережигаемые перемычки).
*   **EPROM:** Стирание ультрафиолетом через кварцевое окно.
*   **EEPROM (Electrically Erasable):** Электрическое стирание и запись. Можно стирать побайтно. Медленная запись, ограниченный ресурс (100к-1М циклов).
*   **Flash:** Электрическое стирание блоками (страницами). Быстрее и плотнее, чем EEPROM. Основная память программ в МК.

### 2. Определения и принцип работы I2C. Передача бита и данных
**Определения:**
*   **Master (Ведущий):** Генерирует тактовый сигнал (SCL) и инициирует обмен.
*   **Slave (Ведомый):** Слушает шину, отвечает на свой адрес.
*   **Transmitter (Передатчик) / Receiver (Приемник):** Роли могут меняться (Master может читать данные от Slave).

**Передача бита:**
*   Один тактовый импульс SCL на каждый бит данных.
*   **Правило:** Данные на линии SDA должны быть стабильны, пока SCL находится в высоком уровне ("1").
*   Изменять состояние SDA можно только тогда, когда SCL находится в низком уровне ("0").

---

## Билет 22
### 1. ОЗУ (RAM) и их виды
**RAM (Random Access Memory):**
*   **SRAM (Static RAM):** Ячейка — триггер (4-6 транзисторов).
    *   Плюсы: Очень быстрая, простая в управлении, не требует регенерации.
    *   Минусы: Дорогая, занимает много места на кристалле (низкая плотность).
    *   Применение: Кэш-память, ОЗУ микроконтроллеров.
*   **DRAM (Dynamic RAM):** Ячейка — конденсатор и транзистор.
    *   Плюсы: Дешевая, очень высокая плотность.
    *   Минусы: Медленнее SRAM, требует периодической регенерации (Refresh), сложный контроллер.
    *   Применение: Оперативная память ПК (DDR).

### 2. I2C: START/STOP, ACK, синхронизация
*   **START Condition:** Уникальное состояние: переход SDA из 1 в 0 при высоком уровне SCL. Означает начало пакета.
*   **STOP Condition:** Переход SDA из 0 в 1 при высоком уровне SCL. Означает конец обмена.
*   **ACK (Acknowledge):** 9-й бит подтверждения. Приемник притягивает SDA к земле (0), подтверждая получение байта.
*   **NACK (Not Acknowledge):** Приемник оставляет SDA высоким (1). Означает конец передачи или ошибку.
*   **Синхронизация (Clock Stretching):** Если Slave не успевает обработать данные, он может удерживать SCL в низком уровне ("0"). Master ждет, пока SCL не станет "1". Реализуется за счет схемы "Монтажное И".

---

## Билет 23
### 1. Память EEPROM (E2PROM) и характеристики AT24Cxx
**EEPROM:** Энергонезависимая память с электрическим стиранием. Используется для хранения настроек, калибровочных констант.
**AT24Cxx (например, AT24C02, AT24C64):** Популярная серия I2C EEPROM.
*   **Интерфейс:** I2C (2 провода).
*   **Питание:** Широкий диапазон (1.8В – 5.5В).
*   **Организация:** Побайтный доступ или страничный (Page Write).
*   **Время записи:** Длительное (около 5-10 мс на байт/страницу).
*   **Ресурс:** Обычно 1 000 000 циклов перезаписи. Данные хранятся 100 лет.

### 2. Формат данных I2C (7-бит адрес). Арбитраж. Преимущества
**Формат пакета:**
1.  **START.**
2.  **Адрес (7 бит):** Уникальный номер устройства.
3.  **Бит R/W:** 0 = Запись (Master -> Slave), 1 = Чтение (Slave -> Master).
4.  **ACK:** От Slave.
5.  **Данные (8 бит).**
6.  **ACK:** От приемника.
7.  **STOP.**

**Арбитраж:** Механизм разрешения коллизий в Multi-master системе. Если два мастера начинают передачу одновременно, они следят за шиной. Если мастер выдает "1" (отпускает шину), а видит "0" (кто-то другой тянет), он понимает, что проиграл арбитраж, и переходит в режим приема. Данные не искажаются.
**Преимущества:** Мало линий (2), простая адресация, возможность добавления устройств без переделки платы.

---

## Билет 24
### 1. Характеристики и организация микросхемы AT24Cxx
*   **Адресация:** Использует 3 вывода (A0, A1, A2) для задания младших бит адреса устройства (позволяет подключить до 8 микросхем на одну шину).
*   **Страничная запись:** Можно записать сразу целую страницу (например, 8, 16 или 32 байта) за один цикл записи (5 мс), что ускоряет работу.
*   **Current Address Read:** Чтение по текущему адресу счетчика.
*   **Sequential Read:** Последовательное чтение всего массива памяти (счетчик инкрементируется автоматически).

### 2. RS-485: особенности, электрические/временные характеристики, скорость/дальность
**RS-485 (TIA/EIA-485):** Стандарт физического уровня для промышленной передачи данных.
*   **Дифференциальная передача:** Сигнал передается по витой паре (A и B). Логическая "1": $V_A - V_B > 200$ мВ. Логический "0": $V_B - V_A > 200$ мВ.
*   **Помехоустойчивость:** Синфазные помехи вычитаются.
*   **Топология:** Общая шина (Bus). До 32 (или 256) устройств.
*   **Режим:** Полудуплекс (Half-Duplex) — передача по очереди.
*   **Скорость vs Дальность:**
    *   10 Мбит/с на 12 метров.
    *   100 кбит/с на 1200 метров.
    *   Произведение $Speed \times Length \approx 10^8$.

---

## Билет 25
### 1. Блок-схема EEPROM и адресация модулей
**Блок-схема:**
*   **Матрица памяти:** Ячейки EEPROM.
*   **Дешифратор строк/столбцов (X/Y Decoder):** Выбор ячейки.
*   **Регистр данных:** Буфер ввода-вывода.
*   **Логика управления:** Обработка Start/Stop, ACK.
*   **Генератор высокого напряжения (High Voltage Pump):** Создает напряжение (около 15-20В) для туннелирования заряда при записи.

**Адресация:**
*   **Device Address (Control Byte):** `1 0 1 0 A2 A1 A0 R/W`. Фиксированная часть (1010) + Аппаратные пины (A2-A0).
*   **Word Address:** Адрес ячейки внутри памяти (8 или 16 бит), передается следующим байтом после адреса устройства.

### 2. RS-485: согласование (termination) и конфигурация. Защитное смещение (bias)
*   **Согласование (Терминация):** Для предотвращения отражения сигнала на концах длинной линии ставятся резисторы-терминаторы ($R_t = 120$ Ом), равные волновому сопротивлению кабеля.
*   **Конфигурация:** "Шлейф" (Daisy Chain). Ответвления (Stubs) должны быть минимальной длины.
*   **Защитное смещение (Failsafe Biasing):** Когда никто не передает (шина в Z-состоянии), уровни могут плавать и ловиться "шум". Резисторы подтяжки (Pull-up на A, Pull-down на B) задают жесткий уровень логической "1" в режиме простоя.

---

## Билет 26
### 1. Операции записи в EEPROM
*   **Byte Write (Запись байта):**
    1.  Master посылает Start, Адрес устройства, Адрес ячейки, Байт данных.
    2.  Slave отвечает ACK.
    3.  Master посылает Stop.
    4.  EEPROM начинает внутренний цикл записи (Self-timed write cycle), который длится 5-10 мс. В это время чип не отвечает на команды (NACK).
*   **Page Write (Запись страницы):**
    1.  То же самое, но Master не посылает Stop после первого байта данных, а продолжает слать данные.
    2.  Адрес внутри страницы инкрементируется, но старшие биты адреса не меняются (циклический переход в начало страницы).
    3.  По команде Stop все байты записываются в массив памяти одновременно.
*   **Acknowledge Polling:** Метод проверки окончания записи. Master шлет Start + Адрес. Если получил ACK — запись завершена.

### 2. Надёжность RS-485: предотвращение приёма в полудуплексе. Схема подключения трансивера
*   **Проблема эха:** Так как линии приема (RO) и передачи (DI) объединены внутри трансивера на дифференциальную пару, при передаче приемник "слышит" свои же данные.
*   **Решение:**
    1.  **Аппаратное:** Отключать приемник во время передачи (подать "1" на вход $\overline{RE}$).
    2.  **Программное:** Принимать эхо и игнорировать его (или сравнивать с переданным для контроля целостности линии).
*   **Схема трансивера (например, MAX485):**
    *   **DI (Driver Input):** Вход данных (от TX микроконтроллера).
    *   **RO (Receiver Output):** Выход данных (к RX микроконтроллера).
    *   **DE (Driver Enable):** Разрешение выхода передатчика (активный высокий).
    *   **$\overline{RE}$ (Receiver Enable):** Разрешение приемника (активный низкий).
    *   Обычно DE и $\overline{RE}$ соединяют вместе и управляют одним пином МК: 1 = Передача, 0 = Прием.

---

## Билет 27
### 1. Операции чтения из памяти EEPROM
*   **Current Address Read:** Чтение байта по текущему значению внутреннего счетчика адреса (последний адрес + 1). Используется, если нужно просто считать следующий байт.
*   **Random Read (Произвольное чтение):**
    1.  "Фиктивная запись" (Dummy Write): Start + Адрес устр + Адрес ячейки. (Цель — установить счетчик адреса).
    2.  Repeated Start.
    3.  Адрес устр (с битом Read).
    4.  Чтение байта.
*   **Sequential Read (Последовательное чтение):** После чтения байта Master шлет ACK (вместо NACK), и EEPROM выдает следующий байт. Можно считать всю память за раз.

### 2. CAN: области применения, Data Link Layer (LLC/MAC), Physical Layer, характеристики
**CAN (Controller Area Network):**
*   **Применение:** Автомобильная электроника (связь ECU двигателя, ABS, панели приборов), промышленная автоматика.
*   **Physical Layer (Физический уровень):** Витая пара. Дифференциальный сигнал (CAN_H, CAN_L). Терминаторы 120 Ом. Логика: "Доминантный" (0) перебивает "Рецессивный" (1).
*   **Data Link Layer (Канальный уровень):**
    *   **MAC (Medium Access Control):** Управление доступом. Арбитраж на основе ID (чем меньше ID, тем выше приоритет). Обнаружение ошибок (CRC), повторная передача.
    *   **LLC (Logical Link Control):** Фильтрация сообщений (прием только нужных ID).
*   **Характеристики:** Высокая надежность, гарантированная доставка (ACK), скорость до 1 Мбит/с (CAN FD быстрее), длина поля данных до 8 байт.

---

## Билет 28
### 1. Порты ввода-вывода (I/O Ports)
Основной интерфейс МК с внешним миром (GPIO).
*   **Регистры:**
    *   **DDR (Data Direction Register):** Направление (Вход/Выход).
    *   **PORT (Output Data):** Значение на выходе (0/1) или включение подтяжки.
    *   **PIN (Input Data):** Чтение реального состояния вывода.
*   **Вход:** Может быть высокоимпедансным (Hi-Z), с подтяжкой (Pull-up/Pull-down). Часто имеет триггер Шмитта для подавления шума.
*   **Выход:** Push-Pull или Open-Drain.

### 2. Промышленный Ethernet: реальное время, резервирование, кольцевая топология, отличие от обычного Ethernet
*   **Отличие:** Обычный Ethernet (TCP/IP) не гарантирует время доставки пакета (недетерминирован). Промышленный Ethernet (PROFINET, EtherCAT) обеспечивает **Real-Time** (гарантированное время реакции, джиттер < 1 мкс).
*   **Резервирование:** Использование кольцевой топологии. Если кабель рвется в одном месте, связь идет по другой дуге кольца. Протоколы MRP (время восстановления ~200 мс) или HSR/PRP (нулевое время восстановления, дублирование пакетов).
*   **Физика:** Более прочные разъемы (M12), защита от помех, питание через Ethernet (PoE).

---

## Билет 29
### 1. Однонаправленные порты и схема выхода Push-Pull
*   **Однонаправленные:** Порты, работающие только на вход или только на выход (в старых чипах). В современных МК почти все порты двунаправленные (Quasi-bidirectional или настраиваемые).
*   **Push-Pull (Двухтактный выход):**
    *   Состоит из двух транзисторов: верхнего (PMOS) и нижнего (NMOS).
    *   **Лог. 1:** Верхний открыт, Нижний закрыт -> Выход подключен к Vcc.
    *   **Лог. 0:** Верхний закрыт, Нижний открыт -> Выход подключен к GND.
    *   **Плюсы:** Может выдавать и принимать ток (активный драйвер), крутые фронты (высокая скорость).

### 2. LIN. PLC технология. Преимущества/недостатки PLC (сравнение с Wi-Fi)
*   **LIN (Local Interconnect Network):** Дешевая однопроводная шина для авто (зеркала, стеклоподъемники). Медленная (20 кбит/с), Master-Slave. UART-based.
*   **PLC (Power Line Communication):** Передача данных по проводам питания (220В).
    *   **Преимущества:** Не нужно прокладывать новые кабели (используется существующая проводка). Пробивает там, где Wi-Fi глохнет (толстые стены).
    *   **Недостатки:** Высокий уровень помех в сети, затухание сигнала, зависимость от качества проводки.
    *   **Сравнение с Wi-Fi:** Wi-Fi мобильнее, но PLC стабильнее в сложных зданиях.

---

## Билет 30
### 1. Выходные порты Open-Drain и выходные порты с внутренней нагрузкой
*   **Open-Drain (Открытый сток/коллектор):**
    *   Только нижний транзистор (NMOS). Может притянуть к земле (0) или "висеть в воздухе" (Z).
    *   Для получения лог. "1" нужен внешний резистор подтяжки (Pull-up).
    *   **Применение:** Шина I2C, согласование уровней (например, 3.3В МК управляет 5В устройством), "Монтажное ИЛИ".
*   **Внутренняя нагрузка (Internal Pull-up):**
    *   Встроенный в МК резистор (обычно 20-50 кОм), подключаемый к Vcc программно.
    *   Позволяет подключать кнопки/датчики без внешних резисторов.

### 2. M2M. ARINC 429. MIL-STD-1553. Physical layer, Bus Controller, Remote devices, Monitor
*   **M2M (Machine-to-Machine):** Технологии обмена данными между устройствами без участия человека (телеметрия, IoT).
*   **ARINC 429:** Стандарт для гражданской авиации.
    *   Топология: Точка-точка (1 передатчик -> до 20 приемников). Однонаправленная.
    *   Физика: Витая пара. Биполярный сигнал RZ (+10В, 0В, -10В).
*   **MIL-STD-1553:** Стандарт для военной авиации.
    *   Топология: Магистральная шина с дублированием (Канал А и Б).
    *   Физика: Дифференциальная пара, трансформаторная развязка, Манчестерский код.
    *   **Устройства:**
        *   **Bus Controller (BC):** Контроллер шины (Master). Инициирует все обмены.
        *   **Remote Terminal (RT):** Оконечное устройство (Slave). Исполнитель.
        *   **Bus Monitor (BM):** Монитор. Слушает шину (черный ящик).
